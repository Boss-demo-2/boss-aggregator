<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BOSS ‚Äî System Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500;600&display=swap"
        rel="stylesheet" />
    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
            color: #1e293b;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        .sidebar {
            width: 210px;
            flex-shrink: 0;
            background: #ffffff;
            border-right: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .sb-logo {
            display: flex;
            align-items: center;
            gap: 9px;
            padding: 1rem 1.1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .sb-logo .icon {
            width: 28px;
            height: 28px;
            background: #1d4ed8;
            border-radius: 7px;
            display: grid;
            place-items: center;
            color: #fff;
            font-weight: 700;
            font-size: 0.78rem;
        }

        .sb-logo .name {
            font-weight: 600;
            font-size: 0.88rem;
            color: #0f172a;
        }

        .sb-logo .sub {
            font-size: 0.65rem;
            color: #94a3b8;
        }

        .sb-group {
            padding: 1rem 0.75rem 0.25rem;
            font-size: 0.62rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #94a3b8;
        }

        .sb-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0.45rem 0.85rem;
            margin: 1px 0.5rem;
            border-radius: 7px;
            font-size: 0.8rem;
            color: #475569;
            text-decoration: none;
            transition: background 0.1s, color 0.1s;
        }

        .sb-link:hover {
            background: #f1f5f9;
            color: #0f172a;
        }

        .sb-link.active {
            background: #eff6ff;
            color: #1d4ed8;
            font-weight: 500;
        }

        .sb-bottom {
            margin-top: auto;
            padding: 0.85rem;
            border-top: 1px solid #e2e8f0;
        }

        .sb-version-box {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 0.65rem 0.85rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .svb-label {
            font-size: 0.62rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #94a3b8;
        }

        .svb-ver {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            color: #0f172a;
        }

        .live-pill {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.62rem;
            font-weight: 600;
            color: #16a34a;
        }

        .live-dot {
            width: 5px;
            height: 5px;
            background: #22c55e;
            border-radius: 50%;
        }

        /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* TOPBAR */
        .topbar {
            height: 50px;
            background: #ffffff;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1.5rem;
            flex-shrink: 0;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
        }

        .breadcrumb a {
            color: #94a3b8;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            color: #475569;
        }

        .breadcrumb .sep {
            color: #cbd5e1;
        }

        .breadcrumb .cur {
            color: #0f172a;
            font-weight: 500;
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .last-sync {
            font-size: 0.72rem;
            color: #94a3b8;
        }

        .refresh-btn {
            font-size: 0.75rem;
            font-weight: 500;
            color: #334155;
            background: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 7px;
            padding: 5px 12px;
            cursor: pointer;
            transition: border-color 0.15s;
        }

        .refresh-btn:hover {
            border-color: #94a3b8;
        }

        /* CONTENT */
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }

        .content::-webkit-scrollbar {
            width: 4px;
        }

        .content::-webkit-scrollbar-thumb {
            background: #e2e8f0;
            border-radius: 4px;
        }

        /* STAT CARDS */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        .stat-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            padding: 1rem 1.1rem;
        }

        .sc-label {
            font-size: 0.68rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #94a3b8;
            margin-bottom: 0.4rem;
        }

        .sc-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.6rem;
            font-weight: 700;
            color: #0f172a;
            line-height: 1;
            margin-bottom: 0.3rem;
        }

        .sc-sub {
            font-size: 0.72rem;
            color: #94a3b8;
        }

        .sc-badge {
            display: inline-block;
            font-size: 0.65rem;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 999px;
            margin-top: 0.4rem;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        .badge-blue {
            background: #eff6ff;
            color: #1d4ed8;
            border: 1px solid #bfdbfe;
        }

        .badge-green {
            background: #f0fdf4;
            color: #16a34a;
            border: 1px solid #bbf7d0;
        }

        .badge-red {
            background: #fef2f2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }

        .badge-amber {
            background: #fffbeb;
            color: #d97706;
            border: 1px solid #fde68a;
        }

        .badge-gray {
            background: #f8fafc;
            color: #64748b;
            border: 1px solid #e2e8f0;
        }

        /* TWO COL */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 310px;
            gap: 1.25rem;
        }

        /* CARD PANEL */
        .panel {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
        }

        .panel-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.85rem 1.1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .panel-title {
            font-size: 0.82rem;
            font-weight: 600;
            color: #0f172a;
        }

        .panel-sub {
            font-size: 0.68rem;
            color: #94a3b8;
            margin-top: 1px;
        }

        /* TABLE */
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            text-align: left;
            padding: 0.55rem 1.1rem;
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #94a3b8;
            font-weight: 600;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        td {
            padding: 0.7rem 1.1rem;
            font-size: 0.8rem;
            border-bottom: 1px solid #f1f5f9;
            vertical-align: middle;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover td {
            background: #f8fafc;
        }

        .ver-mono {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.82rem;
            font-weight: 600;
            color: #0f172a;
        }

        .tier-pill {
            display: inline-flex;
            align-items: center;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            padding: 2px 9px;
            border-radius: 999px;
        }

        .tier1 {
            background: #fef2f2;
            color: #b91c1c;
            border: 1px solid #fecaca;
        }

        .tier2 {
            background: #fffbeb;
            color: #b45309;
            border: 1px solid #fde68a;
        }

        .tier3 {
            background: #f8fafc;
            color: #475569;
            border: 1px solid #e2e8f0;
        }

        .status-ok {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 0.72rem;
            color: #16a34a;
        }

        .status-ok::before {
            content: '';
            width: 5px;
            height: 5px;
            background: #22c55e;
            border-radius: 50%;
            display: block;
        }

        /* BUMP TAGS */
        .bump-tag {
            display: inline-flex;
            align-items: center;
            font-size: 0.72rem;
            font-weight: 600;
            padding: 4px 12px;
            border-radius: 7px;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        .bi-major {
            background: #fef2f2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }

        .bi-minor {
            background: #eff6ff;
            color: #1d4ed8;
            border: 1px solid #bfdbfe;
        }

        .bi-patch {
            background: #fffbeb;
            color: #d97706;
            border: 1px solid #fde68a;
        }

        .bi-none {
            background: #f8fafc;
            color: #64748b;
            border: 1px solid #e2e8f0;
        }

        /* INFO PANEL */
        .info-row {
            padding: 0.85rem 1.1rem;
            border-bottom: 1px solid #f1f5f9;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-key {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #94a3b8;
            margin-bottom: 4px;
        }

        .info-val {
            font-size: 0.82rem;
            font-weight: 500;
            color: #0f172a;
        }

        .info-link {
            font-size: 0.72rem;
            color: #1d4ed8;
            text-decoration: none;
            word-break: break-all;
        }

        .info-link:hover {
            text-decoration: underline;
        }

        /* MATRIX TABLE */
        .mx-table {
            width: 100%;
            border-collapse: collapse;
        }

        .mx-table th {
            background: #f8fafc;
        }

        .mx-table td {
            padding: 0.6rem 1.1rem;
            font-size: 0.78rem;
            border-bottom: 1px solid #f1f5f9;
        }

        .mx-table tr:last-child td {
            border-bottom: none;
        }

        .mx-tag {
            font-size: 0.68rem;
            font-weight: 700;
            text-transform: uppercase;
            padding: 2px 9px;
            border-radius: 999px;
        }

        /* TIMELINE */
        .timeline {
            padding: 0.5rem 1.1rem;
        }

        .tl-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 0.6rem 0;
            border-bottom: 1px solid #f1f5f9;
            font-size: 0.78rem;
        }

        .tl-item:last-child {
            border-bottom: none;
        }

        .tl-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .tl-dot.green {
            background: #22c55e;
        }

        .tl-dot.blue {
            background: #60a5fa;
        }

        .tl-ver {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            min-width: 52px;
            color: #0f172a;
        }

        .tl-name {
            flex: 1;
            color: #475569;
        }

        .tl-time {
            font-size: 0.68rem;
            color: #94a3b8;
            white-space: nowrap;
        }

        @media (max-width: 1100px) {
            .stats-row {
                grid-template-columns: repeat(2, 1fr);
            }

            .two-col {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sb-logo">
            <div class="icon">B</div>
            <div>
                <div class="name">BOSS</div>
                <div class="sub">Enterprise Platform</div>
            </div>
        </div>

        <div class="sb-group">Platform</div>
        <a href="index.html" class="sb-link">‚¨° &nbsp;Home</a>
        <a href="dashboard.html" class="sb-link active">‚ó´ &nbsp;Dashboard</a>

        <div class="sb-group">Services</div>
        <a href="https://github.com/Boss-demo-2/demo-auth-service" target="_blank" class="sb-link">üîê &nbsp;Auth
            Service</a>
        <a href="https://github.com/Boss-demo-2/demo-payment-service" target="_blank" class="sb-link">üí≥ &nbsp;Payment
            Service</a>
        <a href="https://github.com/Boss-demo-2/demo-order-service" target="_blank" class="sb-link">üì¶ &nbsp;Order
            Service</a>
        <a href="https://github.com/Boss-demo-2/demo-notification-service" target="_blank" class="sb-link">üîî
            &nbsp;Notification</a>
        <a href="https://github.com/Boss-demo-2/demo-reporting-service" target="_blank" class="sb-link">üìä
            &nbsp;Reporting</a>

        <div class="sb-group">Aggregator</div>
        <a href="https://github.com/Boss-demo-2/boss-aggregator/actions" target="_blank" class="sb-link">‚ö° &nbsp;Run
            Pipeline</a>
        <a href="https://github.com/Boss-demo-2/boss-aggregator/releases" target="_blank" class="sb-link">üè∑
            &nbsp;Releases</a>

        <div class="sb-bottom">
            <div class="sb-version-box">
                <div>
                    <div class="svb-label">BOSS Version</div>
                    <div class="svb-ver" id="sbVer">‚Äî</div>
                </div>
                <div class="live-pill">
                    <div class="live-dot"></div> Live
                </div>
            </div>
        </div>
    </aside>

    <!-- MAIN -->
    <div class="main">
        <div class="topbar">
            <div class="breadcrumb">
                <a href="index.html">BOSS</a>
                <span class="sep">/</span>
                <span class="cur">System Dashboard</span>
            </div>
            <div class="topbar-right">
                <span class="last-sync" id="lastSync">‚Äî</span>
                <button class="refresh-btn" onclick="loadData()">‚Üª Refresh</button>
            </div>
        </div>

        <div class="content">

            <!-- STAT CARDS -->
            <div class="stats-row">
                <div class="stat-card">
                    <div class="sc-label">BOSS Version</div>
                    <div class="sc-value" id="statVer">‚Äî</div>
                    <div class="sc-sub">Current application version</div>
                    <span class="sc-badge badge-blue" id="statBumpBadge">‚Äî</span>
                </div>
                <div class="stat-card">
                    <div class="sc-label">Services Online</div>
                    <div class="sc-value">5 / 5</div>
                    <div class="sc-sub">All microservices healthy</div>
                    <span class="sc-badge badge-green">All Systems Go</span>
                </div>
                <div class="stat-card">
                    <div class="sc-label">Previous Version</div>
                    <div class="sc-value" id="statPrev">‚Äî</div>
                    <div class="sc-sub">Before latest aggregation</div>
                </div>
                <div class="stat-card">
                    <div class="sc-label">Last Aggregation</div>
                    <div class="sc-value" id="statAgo" style="font-size:1.1rem;padding-top:4px;">‚Äî</div>
                    <div class="sc-sub" id="statAbs">‚Äî</div>
                </div>
            </div>

            <!-- TWO COL -->
            <div class="two-col">

                <!-- LEFT -->
                <div style="display:flex;flex-direction:column;gap:1.25rem;">

                    <!-- Services Table -->
                    <div class="panel">
                        <div class="panel-head">
                            <div>
                                <div class="panel-title">Microservice Versions</div>
                                <div class="panel-sub">Latest release from the uat branch of each service</div>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Service</th>
                                    <th>Version</th>
                                    <th>Tier</th>
                                    <th>Status</th>
                                    <th>Max Impact</th>
                                </tr>
                            </thead>
                            <tbody id="servicesTbody">
                                <tr>
                                    <td colspan="5"
                                        style="text-align:center;padding:1.5rem;color:#94a3b8;font-size:0.8rem;">
                                        Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Decision Matrix -->
                    <div class="panel">
                        <div class="panel-head">
                            <div>
                                <div class="panel-title">Decision Matrix</div>
                                <div class="panel-sub">How Tier √ó PR Label determines the BOSS version bump</div>
                            </div>
                        </div>
                        <table class="mx-table">
                            <thead>
                                <tr>
                                    <th>Service Tier</th>
                                    <th>PR Label</th>
                                    <th>BOSS Bump</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="color:#475569">Tier 1 ‚Äî Critical</td>
                                    <td><code
                                            style="font-size:0.75rem;background:#f1f5f9;padding:2px 6px;border-radius:4px;">breaking-change</code>
                                    </td>
                                    <td><span class="mx-tag badge-red">‚¨Ü MAJOR</span></td>
                                    <td style="color:#94a3b8;font-size:0.72rem;">2.1.0 ‚Üí 3.0.0</td>
                                </tr>
                                <tr>
                                    <td style="color:#475569">Tier 1 or 2</td>
                                    <td><code
                                            style="font-size:0.75rem;background:#f1f5f9;padding:2px 6px;border-radius:4px;">feature / enhancement</code>
                                    </td>
                                    <td><span class="mx-tag badge-blue">‚Üë MINOR</span></td>
                                    <td style="color:#94a3b8;font-size:0.72rem;">2.1.0 ‚Üí 2.2.0</td>
                                </tr>
                                <tr>
                                    <td style="color:#475569">Tier 1 or 2</td>
                                    <td><code
                                            style="font-size:0.75rem;background:#f1f5f9;padding:2px 6px;border-radius:4px;">bugfix</code>
                                    </td>
                                    <td><span class="mx-tag badge-amber">¬∑ PATCH</span></td>
                                    <td style="color:#94a3b8;font-size:0.72rem;">2.1.0 ‚Üí 2.1.1</td>
                                </tr>
                                <tr>
                                    <td style="color:#475569">Tier 3 ‚Äî Supporting</td>
                                    <td><code
                                            style="font-size:0.75rem;background:#f1f5f9;padding:2px 6px;border-radius:4px;">any label</code>
                                    </td>
                                    <td><span class="mx-tag badge-amber">¬∑ PATCH</span></td>
                                    <td style="color:#94a3b8;font-size:0.72rem;">2.1.0 ‚Üí 2.1.1</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- RIGHT COLUMN -->
                <div style="display:flex;flex-direction:column;gap:1.25rem;">

                    <!-- Release Details -->
                    <div class="panel">
                        <div class="panel-head">
                            <div class="panel-title">Current Release</div>
                        </div>
                        <div class="info-row">
                            <div class="info-key">BOSS Version</div>
                            <div class="info-val" id="infoVer"
                                style="font-family:'JetBrains Mono',monospace;font-size:1.3rem;font-weight:700;color:#1d4ed8;">
                                ‚Äî</div>
                        </div>
                        <div class="info-row">
                            <div class="info-key">Bump Type</div>
                            <div><span id="infoBump" class="bump-tag bi-none">‚Äî</span></div>
                        </div>
                        <div class="info-row">
                            <div class="info-key">Bump Reason</div>
                            <div class="info-val" id="infoReason"
                                style="font-size:0.78rem;color:#475569;line-height:1.5;">‚Äî</div>
                        </div>
                        <div class="info-row">
                            <div class="info-key">Pipeline</div>
                            <div class="info-val" style="font-size:0.78rem;color:#475569;">BOSS Aggregator ¬∑ GitHub
                                Actions</div>
                        </div>
                        <div class="info-row">
                            <div class="info-key">Live Data Source</div>
                            <a class="info-link"
                                href="https://raw.githubusercontent.com/Boss-demo-2/boss-aggregator/main/version.json"
                                target="_blank">
                                version.json (raw) ‚Üó
                            </a>
                        </div>
                    </div>

                    <!-- Version History -->
                    <div class="panel" style="flex:1;">
                        <div class="panel-head">
                            <div class="panel-title">Version History</div>
                            <div class="panel-sub" id="histCount">‚Äî</div>
                        </div>
                        <div class="timeline" id="timeline">
                            <div style="color:#94a3b8;font-size:0.78rem;padding:0.75rem 0;">Loading...</div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        const RAW = 'https://raw.githubusercontent.com/Boss-demo-2/boss-aggregator/main/version.json';
        const SERVICES = [
            { key: 'demo-auth-service', name: 'Auth / Identity Service', tier: 1, impact: 'MAJOR / MINOR' },
            { key: 'demo-payment-service', name: 'Payment / Core API', tier: 1, impact: 'MAJOR / MINOR' },
            { key: 'demo-order-service', name: 'Order / Inventory', tier: 2, impact: 'MINOR / PATCH' },
            { key: 'demo-notification-service', name: 'Notification Service', tier: 2, impact: 'MINOR / PATCH' },
            { key: 'demo-reporting-service', name: 'Reporting / Logs', tier: 3, impact: 'PATCH only' },
        ];

        function timeAgo(iso) {
            const m = Math.floor((Date.now() - new Date(iso)) / 60000);
            if (m < 1) return 'just now';
            if (m < 60) return m + 'm ago';
            const h = Math.floor(m / 60);
            if (h < 24) return h + 'h ago';
            return Math.floor(h / 24) + 'd ago';
        }
        function fmtAbs(iso) {
            return new Date(iso).toLocaleString([], { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
        }
        function bumpTagClass(b) {
            return ({ major: 'bi-major', minor: 'bi-minor', patch: 'bi-patch', none: 'bi-none' })[b] || 'bi-none';
        }
        function bumpText(b) {
            return ({ major: '‚¨Ü Major', minor: '‚Üë Minor', patch: '¬∑ Patch', none: 'No change' })[b] || '‚Äî';
        }
        function badgeClass(b) {
            return ({ major: 'badge-red', minor: 'badge-blue', patch: 'badge-amber', none: 'badge-gray' })[b] || 'badge-gray';
        }
        function tierClass(t) { return ['', 'tier1', 'tier2', 'tier3'][t] || 'tier3'; }
        function tierText(t) { return ['', 'T1 ¬∑ Critical', 'T2 ¬∑ Important', 'T3 ¬∑ Supporting'][t] || '‚Äî'; }

        async function loadData() {
            try {
                const res = await fetch(RAW + '?t=' + Date.now());
                const d = await res.json();

                // Sidebar + stat cards
                document.getElementById('sbVer').textContent = 'v' + d.bossVersion;
                document.getElementById('statVer').textContent = 'v' + d.bossVersion;
                document.getElementById('statBumpBadge').textContent = bumpText(d.bumpType);
                document.getElementById('statBumpBadge').className = 'sc-badge ' + badgeClass(d.bumpType);
                document.getElementById('statPrev').textContent = 'v' + d.previousVersion;
                document.getElementById('statAgo').textContent = timeAgo(d.lastUpdated);
                document.getElementById('statAbs').textContent = fmtAbs(d.lastUpdated);
                document.getElementById('lastSync').textContent = 'Synced ' + new Date().toLocaleTimeString();

                // Info panel
                document.getElementById('infoVer').textContent = 'v' + d.bossVersion;
                const bump = document.getElementById('infoBump');
                bump.textContent = bumpText(d.bumpType);
                bump.className = 'bump-tag ' + bumpTagClass(d.bumpType);
                document.getElementById('infoReason').textContent = d.bumpReason || '‚Äî';

                // Services table
                const svc = d.services || {};
                document.getElementById('servicesTbody').innerHTML = SERVICES.map(s => `
        <tr>
          <td style="font-weight:500">${s.name}</td>
          <td><span class="ver-mono">${svc[s.key] || '‚Äî'}</span></td>
          <td><span class="tier-pill ${tierClass(s.tier)}">${tierText(s.tier)}</span></td>
          <td><span class="status-ok">Operational</span></td>
          <td style="font-size:0.72rem;color:#94a3b8;">${s.impact}</td>
        </tr>`).join('');

                // Version history (BOSS aggregator releases)
                try {
                    const rRes = await fetch('https://api.github.com/repos/Boss-demo-2/boss-aggregator/releases?per_page=6', {
                        headers: { Accept: 'application/vnd.github.v3+json' }
                    });
                    const rels = await rRes.json();
                    document.getElementById('histCount').textContent = rels.length + ' release(s)';
                    document.getElementById('timeline').innerHTML = rels.length
                        ? rels.map((r, i) => `
              <div class="tl-item">
                <div class="tl-dot ${i === 0 ? 'green' : 'blue'}"></div>
                <span class="tl-ver">${r.tag_name}</span>
                <span class="tl-name">${r.name || r.tag_name}</span>
                <span class="tl-time">${timeAgo(r.published_at)}</span>
              </div>`).join('')
                        : '<div style="color:#94a3b8;font-size:0.78rem;padding:0.5rem 0;">No releases yet. Run the aggregator pipeline.</div>';
                } catch (e) {
                    document.getElementById('timeline').innerHTML = '<div style="color:#94a3b8;font-size:0.75rem;">Could not load releases.</div>';
                }

            } catch (e) { console.error(e); }
        }

        loadData();
        setInterval(loadData, 30000);
    </script>
</body>

</html>